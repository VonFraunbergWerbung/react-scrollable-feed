{"version":3,"sources":["../../dist/index.es.js","App.js","index.js"],"names":["_extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","__$styleInject","styles","index_es","_super","ScrollableFeed","props","_this","call","this","bottomRef","node_modules_react","wrapperRef","__","constructor","prototype","create","__extends","getSnapshotBeforeUpdate","current","viewableDetectionEpsilon","isViewable","componentDidUpdate","previousProps","_a","snapshot","_b","forceScroll","changeDetectionFilter","scrollParentToChild","componentDidMount","parent","child","parentRect","getBoundingClientRect","scrollOffset","top","scrollTop","animateScroll","onScrollComplete","epsilon","childRect","childTopIsViewable","childBottomIsViewable","Math","abs","clientHeight","render","children","className","defaultProps","element","offset","scrollBy","App","classCallCheck","possibleConstructorReturn","getPrototypeOf","state","items","setInterval","addItem","setState","prevState","toConsumableArray","concat","Date","toISOString","_this2","react_default","a","newProps","prevChildren","newChildren","length","map","item","i","key","onClick","Component","ReactDOM","App_App","getElementById"],"mappings":"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","file":"static/js/main.50e3d130.chunk.js","sourcesContent":["function __$styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nimport { createRef, createElement, Component } from 'react';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\n__$styleInject(\"._scrollable-div_1dj6m_1 {\\r\\n  max-height: inherit;\\r\\n  height: inherit;\\r\\n  overflow-y: auto;\\r\\n}\\r\\n\", {});\n\nvar styles = {\n  \"scrollableDiv\": \"_scrollable-div_1dj6m_1\"\n};\n\nvar ScrollableFeed =\n/** @class */\nfunction (_super) {\n  __extends(ScrollableFeed, _super);\n\n  function ScrollableFeed(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.bottomRef = createRef();\n    _this.wrapperRef = createRef();\n    return _this;\n  }\n\n  ScrollableFeed.prototype.getSnapshotBeforeUpdate = function () {\n    if (this.wrapperRef.current && this.bottomRef.current) {\n      var viewableDetectionEpsilon = this.props.viewableDetectionEpsilon;\n      return ScrollableFeed.isViewable(this.wrapperRef.current, this.bottomRef.current, viewableDetectionEpsilon); //This argument is passed down to componentDidUpdate as 3rd parameter\n    }\n\n    return false;\n  };\n\n  ScrollableFeed.prototype.componentDidUpdate = function (previousProps, _a, snapshot) {\n    var _b = this.props,\n        forceScroll = _b.forceScroll,\n        changeDetectionFilter = _b.changeDetectionFilter;\n    var isValidChange = changeDetectionFilter(previousProps, this.props);\n\n    if (isValidChange && (forceScroll || snapshot) && this.bottomRef.current && this.wrapperRef.current) {\n      this.scrollParentToChild(this.wrapperRef.current, this.bottomRef.current);\n    }\n  };\n\n  ScrollableFeed.prototype.componentDidMount = function () {\n    //Scroll to bottom from the start\n    if (this.bottomRef.current && this.wrapperRef.current) {\n      this.scrollParentToChild(this.wrapperRef.current, this.bottomRef.current);\n    }\n  };\n  /**\r\n   * Scrolls a parent element such that the child element will be in view\r\n   * @param parent\r\n   * @param child\r\n   */\n\n\n  ScrollableFeed.prototype.scrollParentToChild = function (parent, child) {\n    var viewableDetectionEpsilon = this.props.viewableDetectionEpsilon;\n\n    if (!ScrollableFeed.isViewable(parent, child, viewableDetectionEpsilon)) {\n      //Source: https://stackoverflow.com/a/45411081/6316091\n      var parentRect = parent.getBoundingClientRect();\n      var childRect = child.getBoundingClientRect(); //Scroll by offset relative to parent\n\n      var scrollOffset = childRect.top + parent.scrollTop - parentRect.top;\n      var _a = this.props,\n          animateScroll = _a.animateScroll,\n          onScrollComplete = _a.onScrollComplete;\n\n      if (animateScroll) {\n        animateScroll(parent, scrollOffset);\n        onScrollComplete();\n      }\n    }\n  };\n  /**\r\n   * Returns whether a child element is visible within a parent element\r\n   * @param parent\r\n   * @param child\r\n   * @param epsilon\r\n   */\n\n\n  ScrollableFeed.isViewable = function (parent, child, epsilon) {\n    epsilon = epsilon || 0; //Source: https://stackoverflow.com/a/45411081/6316091\n\n    var parentRect = parent.getBoundingClientRect();\n    var childRect = child.getBoundingClientRect();\n    var childTopIsViewable = childRect.top >= parentRect.top;\n    var childBottomIsViewable = Math.abs(parentRect.top + parent.clientHeight - childRect.top) <= epsilon; //Use epsilon because getBoundingClientRect might return floats https://stackoverflow.com/a/40879359/6316091\n\n    return childTopIsViewable && childBottomIsViewable;\n  };\n\n  ScrollableFeed.prototype.render = function () {\n    var children = this.props.children;\n    return createElement(\"div\", {\n      className: styles.scrollableDiv,\n      ref: this.wrapperRef\n    }, children, createElement(\"div\", {\n      ref: this.bottomRef\n    }));\n  };\n\n  ScrollableFeed.defaultProps = {\n    forceScroll: false,\n    animateScroll: function animateScroll(element, offset) {\n      element.scrollBy({\n        top: offset\n      });\n    },\n    onScrollComplete: function onScrollComplete() {},\n    changeDetectionFilter: function changeDetectionFilter() {\n      return true;\n    },\n    viewableDetectionEpsilon: 2\n  };\n  return ScrollableFeed;\n}(Component);\n\nexport default ScrollableFeed;","import React, { Component } from 'react';\r\n\r\nimport ScrollableFeed from 'react-scrollable-feed';\r\n\r\nexport default class App extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    setInterval(() => {\r\n      this.addItem();\r\n    }, 800);\r\n  }\r\n\r\n  state = {\r\n    items: [\r\n      'Lorem ipsum dolor sit amet, consectetur adipiscing elit.',\r\n      'Aliquam semper purus vitae commodo elementum.',\r\n      'Maecenas condimentum lacus eget varius accumsan.',\r\n      'Mauris mattis orci sit amet mi consequat tristique.',\r\n      'Aliquam lobortis pulvinar fermentum.',\r\n      'Donec malesuada, sem non scelerisque imperdiet.',\r\n      'Quisque egestas.',\r\n      'Etiam scelerisque tincidunt enim, in dictum metus dapibus.',\r\n      'Quisque eu eros mattis, finibus lorem ut, commodo ipsum.',\r\n      'Vivamus cursus tempor nibh ac aliquet.',\r\n      'Nulla posuere gravida ligula tincidunt efficitur.',\r\n      'Phasellus vel convallis neque, id placerat elit.',\r\n      'Aenean nibh purus, consectetur hendrerit egestas in.',\r\n      'Aliquam pretium, sapien tempus posuere eleifend.',\r\n      'Sed eget viverra.',\r\n    ],\r\n  };\r\n\r\n  addItem() {\r\n    this.setState(prevState => ({\r\n      items: [...prevState.items, new Date().toISOString()]\r\n    }));\r\n  }\r\n\r\n  render() {\r\n    const { items } = this.state;\r\n    return (\r\n      <section>\r\n        <div className={'scrollable-wrapper'}>\r\n          <ScrollableFeed\r\n            changeDetectionFilter={(previousProps, newProps) => {\r\n              const prevChildren = previousProps.children;\r\n              const newChildren = newProps.children;\r\n\r\n              return prevChildren !== newChildren\r\n                && prevChildren[prevChildren.length - 1] !== newChildren[newChildren.length - 1];\r\n            }}\r\n          >\r\n            {items.map((item, i) => <div key={i}>{item}</div>)}\r\n          </ScrollableFeed>\r\n        </div>\r\n        <div className={'text-center'}>\r\n          <button onClick={() => this.addItem()}>Add Item</button>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}